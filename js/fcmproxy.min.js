var fcmproxy={PIN:"",callback:null,onmessage:function(message){if(console.info("IN fcmproxy.onmessage()"),console.log(message),"PIN"===message.dataType)fcmproxy.PIN=message.data.pin,console.log("fcmproxy.PIN='"+fcmproxy.PIN+"'");else"function"==typeof fcmproxy.onmessage_callback&&fcmproxy.onmessage_callback({dataType:message.dataType,data:message.data})},onload:function(){console.info("IN fcmproxy.onload()"),window.addEventListener("message",(event=>{console.log(event.data);var message=event.data;message.data=JSON.parse(window.atob(message.data)),fcmproxy.onmessage(message)}))},sendFCMmessage:function(tokey,dataType,data,collapse,title,body,image){console.info("IN fcmproxy.sendFCMmessage() PIN='"+fcmproxy.PIN+"'");var postMessage={postType:"FCMPUSH",data:window.btoa(JSON.stringify({tokey:tokey,dataType:dataType,data:data,collapse:void 0===collapse?"":collapse,title:void 0===title?"":title,body:void 0===body?"":body,image:void 0===image?"":image}))};parent.postMessage(postMessage,"*")},init:function(onmessage_callback){console.info("IN fcmproxy.init()"),fcmproxy.onload(),"function"==typeof onmessage_callback&&(fcmproxy.onmessage_callback=onmessage_callback)},reg:function(onmessage_callback){console.info("IN fcmproxy.reg()"),"function"==typeof onmessage_callback&&(fcmproxy.onmessage_callback=onmessage_callback)},unreg:function(){console.info("IN fcmproxy.reg()"),fcmproxy.onmessage_callback=null}};